<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>预测方法 | L1ttleQing的小站</title><meta name="keywords" content="数据科学"><meta name="author" content="L1ttleQing"><meta name="copyright" content="L1ttleQing"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="如果你说不出打野的位置，我只能给你零分。">
<meta property="og:type" content="article">
<meta property="og:title" content="预测方法">
<meta property="og:url" content="http://l1ttleqing.github.io/2024/01/29/2%E9%A2%84%E6%B5%8B%E6%96%B9%E6%B3%95/index.html">
<meta property="og:site_name" content="L1ttleQing的小站">
<meta property="og:description" content="如果你说不出打野的位置，我只能给你零分。">
<meta property="og:locale">
<meta property="og:image" content="http://l1ttleqing.github.io/img/md4.png">
<meta property="article:published_time" content="2024-01-29T12:29:10.000Z">
<meta property="article:modified_time" content="2024-02-01T08:10:00.272Z">
<meta property="article:author" content="L1ttleQing">
<meta property="article:tag" content="数据科学">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://l1ttleqing.github.io/img/md4.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://l1ttleqing.github.io/2024/01/29/2%E9%A2%84%E6%B5%8B%E6%96%B9%E6%B3%95/"><link rel="preconnect" href="//cdn1.tianli0.top"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdnjs.sourcegcdn.com/ajax/libs/jquery/3.6.0/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdnjs.sourcegcdn.com/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js',
      css: 'https://cdnjs.sourcegcdn.com/ajax/libs/justifiedGallery/3.8.1/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdnjs.sourcegcdn.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js',
      css: 'https://cdnjs.sourcegcdn.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-02-01 16:10:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css" /><script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script><script>LA.init({id:"Jws8lO85zPmXkSKj",ck:"Jws8lO85zPmXkSKj"})</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="simply-cha-top"></div><div class="is-center" id="sidebar-avatar"><div class="avatar-img"><img src="/img/head_sculpture.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">L1ttleQing</div><div class="author-info__description">越悲怆的时候我越想嬉皮</div></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/L1ttleQing"><i class="fab fa-github"></i><span>主页</span></a><div class="menu-info-social-icons is-center"><a class="social-icon" href="https://github.com/L1ttleQing" target="_blank" title="fab fa-github"></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=820314438&amp;website=www.oicqzone.com" target="_blank" title="fab fa-qq"></a><a class="social-icon" href="mailto:820314438@qq.com" target="_blank" title="fas fa-envelope-open-text"></a><a class="social-icon" href="https://space.bilibili.com/26528101" target="_blank" title="fab fa-bilibili"></a><a class="social-icon" href="weixin://dl/w19183660929" target="_blank" title="fab fa-weixin"></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child" style="left:-100px;"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div></div><div class="simply-cha"></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/">L1ttleQing的小站</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child" style="left:-100px;"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div></div></div><div id="navFn"><div id="search-button"><a class="social-icon search"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-sousuo"></use></svg><span> 搜索</span></a></div><div id="darkmodeBt"><a class="darkmode switch"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-deng1"></use></svg><span id="darkmode-switch"> 关灯</span></a></div><div id="toggle-menu"><a class="site-page"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mulu"></use></svg></a></div></div></div></nav></header><div id="mainbody"><div id="content_leftside"><div id="left_menu"><div class="leftside-social"><a class="social-icon" href="https://github.com/L1ttleQing" target="_blank" title="fab fa-github"></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=820314438&amp;website=www.oicqzone.com" target="_blank" title="fab fa-qq"></a><a class="social-icon" href="mailto:820314438@qq.com" target="_blank" title="fas fa-envelope-open-text"></a><a class="social-icon" href="https://space.bilibili.com/26528101" target="_blank" title="fab fa-bilibili"></a><a class="social-icon" href="weixin://dl/w19183660929" target="_blank" title="fab fa-weixin"></a></div><div class="leftside-contents"><span id="read-percent">0</span></div><div class="leftside-comment"><a href="#post-comment" title="要去留言吗？"><i class="fa-lg fas fa-comment"></i></a></div><div class="leftside-qq" title="来糖果屋聊天噻！"><i class="fa-lg fas fa-qrcode"></i></div><div class="leftside-rmb"><a title="柿还在施工的捐赠页！不给看！"><i class="fa-lg fas fa-money-check-dollar"></i></a></div></div><div id="left_display"><div class="candy_qrcode"><img src="./img/candy-qr.png"></div></div></div><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">预测方法</h1><div id="post-meta"><div class="tag-cloud-list is-center"><a href="/tags/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/" style="font-size: 1.5em; color: rgb(176, 65, 163)">数据科学</a></div><div class="meta-firstline"><span class="post-meta-date"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-01-29T12:29:10.000Z" title="发表于 2024-01-29 20:29:10">2024-01-29</time><span class="post-meta-separator">|</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shijian"></use></svg><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-02-01T08:10:00.272Z" title="更新于 2024-02-01 16:10:00">2024-02-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fenlei1"></use></svg><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/">学习心得</a></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>28分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="预测方法"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div><article class="post-content" id="article-container"><p>预测类算法就是一种通过学习历史数据来预测未来事件或趋势的方法。它会根据过去的经验和规律，根据已知的数据来做出预测，帮助我们预测未来可能会发生的事情。这里记录几种在数学建模里较为常见且泛用性较高的算法。</p>
<p>先列出一些常见数据的类型：</p>
<ol>
<li><p>横截面数据（Cross-Sectional Data）：是在某一特定时间点上收集的数据。它包括不同个体或单位在同一时间点上的观察结果。例如，在一项调查中，收集了不同家庭在2019年的收入数据，这些数据就构成了横截面数据。通常用于描述群体特征、进行比较分析等。可以采用多元回归分析。</p>
</li>
<li><p>时间序列数据（Time Series Data）：是按照时间顺序记录的数据。它包括同一变量在不同时间点上的观察结果，可以用来分析随时间变化的趋势和模式。例如，某公司每个季度的销售额数据就构成了时间序列数据。可以采用时间序列分析。</p>
</li>
<li><p>面板数据（Panel Data）：结合了横截面数据和时间序列数据的特点，包括了多个个体（横截面）在多个时间点上的观察结果。面板数据可用于研究个体差异以及随时间的变化。例如，对不同地区居民的收入情况进行跟踪调查，即包含了不同个体在不同时间点上的数据。很少见，遇到了再说。</p>
</li>
</ol>
<h1 id="回归分析方法"><a href="#回归分析方法" class="headerlink" title="回归分析方法"></a>回归分析方法</h1><p>回归分析是一种用来预测或解释变量之间关系的统计方法。它的主要思想是通过观察已知的数据来建立一个数学模型，然后利用这个模型来预测未来的结果或者解释变量之间的关系，根据现有的数据来预测未来的结果。对于决策和规划都非常有帮助。</p>
<p>回归分析应该识别重要变量，判断相关性的方向，并且估计权重（回归系数）。</p>
<p>首先是简单线性回归。假设我们有两个变量，一个是用来帮助预测的变量X（称为自变量）,另一个是我们想要预测的变量Y（称为因变量）。比如，我们想要预测一个人的体重，可能会用身高作为帮助预测的变量。简单线性回归就是要找到一个直线方程，通过自变量（比如身高）来预测因变量（比如体重）。这个直线方程可以告诉我们，随着自变量的变化，因变量会怎么变化。</p>
<p>简单线性回归虽然可以用来描述变量之间的<strong>相关性</strong>，但却不能证明<strong>因果性</strong>。两个变量之间的相关性并不一定意味着它们之间存在因果关系，也就是说，一个变量的变化是否会导致另一个变量的变化，需要更进一步的研究来确定。举例来说，假设我们发现一个城市的人均收入和房价呈现正相关，即人均收入越高，该城市的房价也越高。这种相关性看起来很有道理，但我们不能因此就断定高收入导致了高房价，或者是高房价影响了人们的收入水平。实际上还可能存在其他因素，比如地理位置、人口密度等，也可能影响了这两个变量之间的关系。</p>
<p>让我们来举一个更极端的例子。假设我们观察到某地区消防队员人数与火灾数量之间存在正相关关系，也就是说，我们得出的结论是随着消防队员人数的增加，火灾的数量也在增加。因此我们应该减少消防人员的数量，这样火灾就会越来越少了！很显然，这个结论存在相关性，但没有因果性，我们不能因此得出消防队员人数的增加导致了火灾数量的增加的结论。实际上，更可能的解释是，这种相关性是由于第三个隐藏变量引起的，比如人口密度、城市规模等因素。另外，也可能是由于数据的选择或者测量方法等问题造成了这种看似荒谬的相关性。</p>
<p>因此，我们更应该进行多元回归分析，在简单线性回归的基础上考虑了更多的自变量。比如，我们想预测一个人的收入，不仅仅会考虑教育水平，还会考虑工作经验、所在地区等因素。多元回归可以帮助我们建立一个更复杂的模型，来解释所有这些自变量对因变量的影响。</p>
<p>多元回归分析中，存在内生性的问题。具体来说，当解释变量与误差项之间存在内生性时，解释变量不再是外生的，即它们不再是独立于误差项的。这意味着解释变量的变化可能是由于未观测到的因素或其他内部因素引起的，而不仅仅是外部因素的结果。内生性问题可能导致统计模型中的参数估计不一致，使得我们无法准确地推断解释变量对因变量的真实影响。它还可能模糊或混淆解释变量与因变量之间的因果关系，使得我们难以确定哪个是因果变量，哪个是结果变量。</p>
<p>核心解释变量通常是研究中我们最感兴趣的变量，也是对因果关系进行推断的变量。在一个统计模型中，核心解释变量通常是被认为对因变量有直接影响的变量。控制变量则是指在研究中被引入并控制在统计模型中的其他变量。它们被用来减少内生性问题的影响，以确保核心解释变量与因变量之间的关系是被准确估计的。通过引入控制变量，可以尽可能地排除其他可能对因变量产生影响的变量，从而更准确地衡量核心解释变量的影响。应保证核心解释变量不存在内生性。</p>
<p>进行回归分析,代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">% 读取 Excel 文件数据</span><br><span class="line">data = xlsread(&#x27;高数成绩数据.xlsx&#x27;, &#x27;Sheet1&#x27;, &#x27;A2:E&#x27;);</span><br><span class="line"></span><br><span class="line">% 提取自变量和因变量</span><br><span class="line">X = data(:, 2:end); % 自变量：高考数学、高考总分、班干与否、平时成绩</span><br><span class="line">y = data(:, 1); % 因变量：期末成绩</span><br><span class="line"></span><br><span class="line">% 进行多元线性回归分析</span><br><span class="line">mdl = fitlm(X, y);</span><br><span class="line"></span><br><span class="line">% 打印回归系数</span><br><span class="line">disp(mdl.Coefficients);</span><br><span class="line"></span><br><span class="line">% 打印回归统计信息</span><br><span class="line">disp(mdl.Rsquared);</span><br><span class="line">disp(sqrt(mdl.MSE));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>或者使用stata软件，导入后使用:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">cls </span><br><span class="line">// 导入数据</span><br><span class="line">// import excel &quot;奶粉数据.xlsx&quot;, sheet(&quot;Sheet1&quot;) firstrow</span><br><span class="line">import excel &quot;奶粉数据.xlsx&quot;, sheet(&quot;Sheet1&quot;) firstrow</span><br><span class="line">// 定量变量的描述性统计</span><br><span class="line"></span><br><span class="line">summarize 团购价元 评价量 商品毛重kg</span><br><span class="line">// 定性变量的频数分布，并得到相应字母开头的虚拟变量</span><br><span class="line">tabulate 配方,gen(A)</span><br><span class="line">tabulate 奶源产地 ,gen(B)</span><br><span class="line">tabulate 国产或进口 ,gen(C)</span><br><span class="line">tabulate 适用年龄岁 ,gen(D)</span><br><span class="line">tabulate 包装单位 ,gen(E)</span><br><span class="line">tabulate 分类 ,gen(F)</span><br><span class="line">tabulate 段位 ,gen(G)</span><br><span class="line"></span><br><span class="line">// Stata会自动剔除多重共线性的变量</span><br><span class="line">regress 评价量 团购价元 商品毛重kg A1 A2 A3 B1 B2 B3 B4 B5 B6 B7 B8 B9 C1 C2 D1 D2 D3 D4 D5 E1 E2 E3 E4 F1 F2 G1 G2 G3 G4</span><br><span class="line">est store m2</span><br><span class="line">reg2docx m2 using m2.docx, replace</span><br><span class="line"></span><br><span class="line">// 得到标准化回归系数</span><br><span class="line">regress 评价量 团购价元 商品毛重kg, b </span><br><span class="line"></span><br><span class="line">// 画出残差图</span><br><span class="line">regress 评价量 团购价元 商品毛重kg A1 A2 A3 B1 B2 B3 B4 B5 B6 B7 B8 B9 C1 C2 D1 D2 D3 D4 D5 E1 E2 E3 E4 F1 F2 G1 G2 G3 G4</span><br><span class="line">rvfplot </span><br><span class="line">// 残差与拟合值的散点图</span><br><span class="line">graph export a1.png ,replace</span><br><span class="line">// 残差与自变量团购价的散点图</span><br><span class="line">rvpplot  团购价元</span><br><span class="line">graph export a2.png ,replace</span><br><span class="line"></span><br><span class="line">// 描述性统计并给出分位数对应的数值</span><br><span class="line">summarize 评价量,d</span><br><span class="line"></span><br><span class="line">// 作评价量的概率密度估计图</span><br><span class="line">kdensity 评价量 </span><br><span class="line">graph export a3.png ,replace</span><br><span class="line"></span><br><span class="line">// 异方差BP检验</span><br><span class="line">estat hettest ,rhs iid</span><br><span class="line"></span><br><span class="line">// 异方差怀特检验</span><br><span class="line">estat imtest,white</span><br><span class="line"></span><br><span class="line">// 使用OLS + 稳健的标准误</span><br><span class="line">regress 评价量 团购价元 商品毛重kg A1 A2 A3 B1 B2 B3 B4 B5 B6 B7 B8 B9 C1 C2 D1 D2 D3 D4 D5 E1 E2 E3 E4 F1 F2 G1 G2 G3 G4, r</span><br><span class="line">est store m3</span><br><span class="line">reg2docx m3 using m3.docx, replace</span><br><span class="line"></span><br><span class="line">// 计算VIF</span><br><span class="line">estat  vif</span><br><span class="line"></span><br><span class="line">// 逐步回归（一定要注意完全多重共线性的影响）</span><br><span class="line">// 向前逐步回归（后面的r表示稳健的标准误）</span><br><span class="line">stepwise reg 评价量 团购价元 商品毛重kg A1 A3 B1 B2 B3 B4 B5 B6 B7 B9 C1 D1 D2 D3 D4 E1 E2 E3 F1 G1 G2 G3,  r pe(0.05)</span><br><span class="line">// 向后逐步回归（后面的r表示稳健的标准误）</span><br><span class="line">stepwise reg 评价量 团购价元 商品毛重kg A1 A3 B1 B2 B3 B4 B5 B6 B7 B9 C1 D1 D2 D3 D4 E1 E2 E3 F1 G1 G2 G3,  r pr(0.05)</span><br><span class="line">// 向后逐步回归的同时使用标准化回归系数（在r后面跟上一个b即可）</span><br><span class="line">stepwise reg 评价量 团购价元 商品毛重kg A1 A3 B1 B2 B3 B4 B5 B6 B7 B9 C1 D1 D2 D3 D4 E1 E2 E3 F1 G1 G2 G3,  r b pr(0.05)</span><br></pre></td></tr></table></figure>




<h1 id="时间序列分析"><a href="#时间序列分析" class="headerlink" title="时间序列分析"></a>时间序列分析</h1><p>时间序列分析是一种用来研究随着时间推移而变化的数据的方法。这种数据可能是按照时间顺序记录下来的，比如每天、每月或每年的数据。时间序列分析的目标是揭示数据中存在的模式、趋势和周期性，并且利用这些信息做出预测或者推断。时间序列分析根据时间和数值性质的不同，可以分为时期序列和时点序列。时期序列反映现象在一定时期内发展的结果，而时点序列反映现象在一定时点上的瞬间水平。时期序列可加，时点序列不可加。通常情况下，时间序列分析可以帮助我们回答以下问题：</p>
<ul>
<li><p>趋势：数据是否存在逐渐增加或减少的趋势？这种趋势是线性的还是非线性的？</p>
</li>
<li><p>季节性：数据是否存在重复出现的季节性模式？比如一年中特定月份或季度的销售数据是否有规律性的波动？</p>
</li>
<li><p>周期性：数据是否存在长期的循环或者周期性变化？比如经济周期、商业周期等。</p>
</li>
<li><p>随机性：数据中是否存在随机的、不规律的波动？</p>
</li>
</ul>
<p>为了回答这些问题，时间序列分析会使用各种统计方法和模型，最常用的是季节分解，指数平滑方法和ARIMA模型。</p>
<ul>
<li><p>季节分解（Seasonal Decomposition）：季节分解是指将时间序列数据分解为趋势、季节性和残差三个部分的过程。趋势表示长期变化趋势，季节性表示周期性变化，残差则是除去趋势和季节性之后的随机波动部分。这种分解有助于我们更好地理解数据的结构和规律，以便进行预测和分析。</p>
</li>
<li><p>指数平滑方法（Exponential Smoothing Method）：指数平滑方法是一种常用的预测方法，适用于没有明显趋势和季节性的时间序列数据。该方法通过对历史数据赋予不同权重，来进行未来数值的预测。简单指数平滑、双指数平滑和三指数平滑是常见的指数平滑方法，它们在对历史数据赋予权重时有不同的考虑因素，适用于不同类型的数据。</p>
</li>
<li><p>ARIMA模型（Autoregressive Integrated Moving Average Model）：ARIMA模型是一种经典的时间序列分析和预测模型，适用于具有趋势和季节性的时间序列数据。ARIMA模型包括自回归（AR）、差分（I）和移动平均（MA）三个部分，分别代表了数据的自相关、趋势和残差成分。通过对这三个部分的组合，ARIMA模型可以对未来的数值进行预测。</p>
</li>
</ul>
<p>对于时间序列分析，我们将使用季节ARIMA模型（SARIMA），这是表述最全面的时间序列预测模型之一，其他的模型都可以由它简化变型后得到。其建模思想是，将预测对象随时间推移而形成的数据序列看作一个随机序列，时间序列是一组依赖时间*的随机变量，构成该时间序列的单个序列值虽然具有不确定性，但整个序列的变化却是有一定的规律性，可以用数学模型近似描述。这组随机变量所具有的依存关系或自相关性表征了预测对象发展的延续性，而一旦这种自相关性被相应的数学模型描述出来，就可以从时间序列的过去值预测其未来值，通过SARIMA模型可以消除趋势性和季节性，转化为平稳时间序列进行建模。</p>
<p>受限于水平，具体过程完全依赖于spss进行处理，请移步<a target="_blank" rel="noopener" href="https://www.spsspro.com/help/sarima/">帮助文档</a>。</p>
<p>此处内嵌网页，便于查阅。</p>
<iframe width="100%" height="500" src="https://www.spsspro.com/help/sarima/" frameborder="0" ></iframe>

<p>这个方法在预测中短期的变化时效果较好，长期的预测可能会遇到外界环境变化的问题。</p>
<h1 id="灰色预测模型"><a href="#灰色预测模型" class="headerlink" title="灰色预测模型"></a>灰色预测模型</h1><p>存在三种系统，白色、黑色和灰色系统。它们之间的区别主要在于数据是否具有可预测性，以及对系统内部机制的了解程度。</p>
<ul>
<li><p>白色系统（White System）：白色系统指的是没有相关性的随机过程或时间序列，其各个时刻的观测值彼此独立且方差相等，因此无法通过历史数据来预测未来的数据。白噪声就是一种典型的白色系统，其在时间轴上呈现为完全随机、无法预测的波动。</p>
</li>
<li><p>黑色系统（Black System）：黑色系统指的是具有确定性规律的时间序列，其内部机制已经被充分理解，可以通过历史数据来预测未来的数据。黑色系统中的趋势和周期性成分都是明显的，由此可以建立相应的数学模型。例如，股票市场中的价格波动就属于一种黑色系统。</p>
</li>
<li><p>灰色系统（Grey System）：灰色系统指的是既不是白色系统也不是黑色系统的时间序列，其内部机制尚未被完全理解，但对其进行预测和分析仍然有一定的可行性。灰色系统中的趋势和周期性成分相对不太明显，其模型参数通常需要通过数据拟合来确定。</p>
</li>
</ul>
<p>而灰色预测模型是一种对含有不确定因素的系统进行预测的方法。灰色预测通过鉴别系统因素之间发展趋势的相异程度，即进行关联分析，并对原始数据进行生成处理来寻找系统变动的规律，生成有较强规律性的数据序列，然后建立相应的微分方程模型，从而预测事物未来发展趋势的状况。在处理较少的特征值数据时，不需要数据的样本空间足够大，就可以解决历史数据少，序列完整性低，可靠性低的问题，可以生成得到规律较强的生成序列。</p>
<p>我们根据数据量的不同，选择使用传统的GM(1,1)模型、新信息GM(1,1)模型还是新陈代谢GM(1,1)模型进行预测，然后比较三种模型对试验数据的预测结果。</p>
<h2 id="主函数"><a href="#主函数" class="headerlink" title="主函数"></a>主函数</h2><p>仅作为例子，代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br></pre></td><td class="code"><pre><span class="line">clear;clc</span><br><span class="line">year =[1995:1:2004]&#x27;;  % 横坐标表示年份，写成列向量的形式（加&#x27;就表示转置）</span><br><span class="line">x0 = [174,179,183,189,207,234,220.5,256,270,285]&#x27;;  %原始数据序列，写成列向量的形式（加&#x27;就表示转置）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">% 画出原始数据的时间序列图</span><br><span class="line">figure(1); % 设置编号</span><br><span class="line">plot(year,x0,&#x27;o-&#x27;); grid on;  % 原式数据的时间序列图</span><br><span class="line">set(gca,&#x27;xtick&#x27;,year(1:1:end))  % 设置x轴横坐标的间隔为1</span><br><span class="line">xlabel(&#x27;年份&#x27;);  ylabel(&#x27;排污总量&#x27;);  % 给坐标轴加上标签</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%% 因为我们要使用GM(1,1)模型，其适用于数据期数较短的非负时间序列</span><br><span class="line">ERROR = 0;  % 建立一个错误指标，一旦出错就指定为1</span><br><span class="line">% 判断是否有负数元素</span><br><span class="line">if sum(x0&lt;0) &gt; 0  </span><br><span class="line">    disp(&#x27;灰色预测的时间序列中不能有负数。&#x27;)</span><br><span class="line">    ERROR = 1;</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">% 判断数据量是否太少</span><br><span class="line">n = length(x0);  % 计算原始数据的长度</span><br><span class="line">disp(strcat(&#x27;原始数据的长度为&#x27;,num2str(n))) % strcat()连接字符串</span><br><span class="line">if n&lt;=3</span><br><span class="line">    disp(&#x27;数据量太小！&#x27;)</span><br><span class="line">    ERROR = 1;</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">% 数据太多时提示可考虑使用其他方法（不报错）</span><br><span class="line">if n&gt;10</span><br><span class="line">    disp(&#x27;数据太多，考虑使用其他的方法，例如ARIMA，指数平滑等&#x27;)</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">%  防爆机制，如果输入的是行向量则转置为列向量</span><br><span class="line">if size(x0,1) == 1</span><br><span class="line">    x0 = x0&#x27;;</span><br><span class="line">end</span><br><span class="line">if size(year,1) == 1</span><br><span class="line">    year = year&#x27;;</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%% 对一次累加后的数据进行准指数规律的检验(注意，这个检验有时候即使能通过，也不一定能保证预测结果非常好，例如上面的第三组数据)</span><br><span class="line">if ERROR == 0   </span><br><span class="line">    disp(&#x27;------------------------------------------------------------&#x27;)</span><br><span class="line">    disp(&#x27;准指数规律检验&#x27;)</span><br><span class="line">    x1 = cumsum(x0);   % 生成1-AGO序列，cumsum是累加函数哦~    注意：1.0e+03 *0.1740的意思是科学计数法,即10^3*0.1740 = 174</span><br><span class="line">    rho = x0(2:end) ./ x1(1:end-1) ;   % 计算光滑度rho(k) = x0(k)/x1(k-1)</span><br><span class="line">    </span><br><span class="line">    % 画出光滑度的图形，并画上0.5的直线，表示临界值</span><br><span class="line">    figure(2)</span><br><span class="line">    plot(year(2:end),rho,&#x27;o-&#x27;,[year(2),year(end)],[0.5,0.5],&#x27;-&#x27;); grid on;</span><br><span class="line">    text(year(end-1)+0.2,0.55,&#x27;临界线&#x27;)   % 在坐标(year(end-1)+0.2,0.55)上添加文本</span><br><span class="line">    set(gca,&#x27;xtick&#x27;,year(2:1:end))  % 设置x轴横坐标的间隔为1</span><br><span class="line">    xlabel(&#x27;年份&#x27;);  ylabel(&#x27;原始数据的光滑度&#x27;);  % 给坐标轴加上标签</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    disp(strcat(&#x27;指标1：光滑比小于0.5的数据占比为：&#x27;,num2str(100*sum(rho&lt;0.5)/(n-1)),&#x27;%&#x27;))</span><br><span class="line">    disp(strcat(&#x27;指标2：除去前两个时期外，光滑比小于0.5的数据占比为：&#x27;,num2str(100*sum(rho(3:end)&lt;0.5)/(n-3)),&#x27;%&#x27;))</span><br><span class="line">    disp(&#x27;参考标准：指标1一般要大于60%, 指标2要大于90%，本例可以通过检验吗？&#x27;)</span><br><span class="line">    </span><br><span class="line">    Judge = input(&#x27;可以通过请输入1，不能请输入0：&#x27;);</span><br><span class="line">    if Judge == 0</span><br><span class="line">        disp(&#x27;考虑其他方法吧 例如ARIMA，指数平滑等。&#x27;)</span><br><span class="line">        ERROR = 1;</span><br><span class="line">    end</span><br><span class="line">    disp(&#x27;------------------------------------------------------------&#x27;)</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">%% 当数据量大于4时，我们利用试验组来选择使用传统的GM(1,1)模型、新信息GM(1,1)模型还是新陈代谢GM(1,1)模型； 如果数据量等于4，那么我们直接对三种方法求一个平均来进行预测</span><br><span class="line">if ERROR == 0   % 如果上述错误均没有发生时，才能执行下面的操作步骤</span><br><span class="line">    if  n &gt; 4  % 数据量大于4时，将数据分为训练组和试验组(根据原数据量大小n来取，n为5-7个则取最后两年为试验组，n大于7则取最后三年为试验组)</span><br><span class="line">        disp(&#x27;因为原数据的期数大于4，所以我们可以将数据组分为训练组和试验组&#x27;)   % 注意，如果试验组的个数只有1个，那么三种模型的结果完全相同，因此至少要取2个试验组</span><br><span class="line">        if n &gt; 7</span><br><span class="line">            test_num = 3;</span><br><span class="line">        else</span><br><span class="line">            test_num = 2;</span><br><span class="line">        end</span><br><span class="line">        train_x0 = x0(1:end-test_num);  % 训练数据</span><br><span class="line">        disp(&#x27;训练数据是: &#x27;)</span><br><span class="line">        disp(mat2str(train_x0&#x27;))  % mat2str可以将矩阵或者向量转换为字符串显示, 这里加一撇表示转置，把列向量变成行向量方便观看</span><br><span class="line">        test_x0 =  x0(end-test_num+1:end); % 试验数据</span><br><span class="line">        disp(&#x27;试验数据是: &#x27;)</span><br><span class="line">        disp(mat2str(test_x0&#x27;))  % mat2str可以将矩阵或者向量转换为字符串显示</span><br><span class="line">        disp(&#x27;------------------------------------------------------------&#x27;)</span><br><span class="line">        </span><br><span class="line">        % 使用三种模型对训练数据进行训练，返回的result就是往后预测test_num期的数据</span><br><span class="line">        disp(&#x27; &#x27;)</span><br><span class="line">        disp(&#x27;***下面是传统的GM(1,1)模型预测的详细过程***&#x27;)</span><br><span class="line">        result1 = gm11(train_x0, test_num); %使用传统的GM(1,1)模型对训练数据，并预测后test_num期的结果</span><br><span class="line">        disp(&#x27; &#x27;)</span><br><span class="line">        disp(&#x27;***下面是进行新信息的GM(1,1)模型预测的详细过程***&#x27;)</span><br><span class="line">        result2 = new_gm11(train_x0, test_num); %使用新信息GM(1,1)模型对训练数据，并预测后test_num期的结果</span><br><span class="line">        disp(&#x27; &#x27;)</span><br><span class="line">        disp(&#x27;***下面是进行新陈代谢的GM(1,1)模型预测的详细过程***&#x27;)</span><br><span class="line">        result3 = metabolism_gm11(train_x0, test_num); %使用新陈代谢GM(1,1)模型对训练数据，并预测后test_num期的结果</span><br><span class="line">        </span><br><span class="line">        % 现在比较三种模型对于试验数据的预测结果</span><br><span class="line">        disp(&#x27; &#x27;)</span><br><span class="line">        disp(&#x27;------------------------------------------------------------&#x27;)</span><br><span class="line">        % 绘制对试验数据进行预测的图形（对于部分数据，可能三条直线预测的结果非常接近）</span><br><span class="line">        test_year = year(end-test_num+1:end);  % 试验组对应的年份</span><br><span class="line">        figure(3)</span><br><span class="line">        plot(test_year,test_x0,&#x27;o-&#x27;,test_year,result1,&#x27;*-&#x27;,test_year,result2,&#x27;+-&#x27;,test_year,result3,&#x27;x-&#x27;); grid on;</span><br><span class="line">        set(gca,&#x27;xtick&#x27;,year(end-test_num+1): 1 :year(end))  % 设置x轴横坐标的间隔为1</span><br><span class="line">        legend(&#x27;试验组的真实数据&#x27;,&#x27;传统GM(1,1)预测结果&#x27;,&#x27;新信息GM(1,1)预测结果&#x27;,&#x27;新陈代谢GM(1,1)预测结果&#x27;)  % 注意：如果lengend挡着了图形中的直线，那么lengend的位置可以自己手动拖动</span><br><span class="line">        xlabel(&#x27;年份&#x27;);  ylabel(&#x27;排污总量&#x27;);  % 给坐标轴加上标签</span><br><span class="line">        % 计算误差平方和SSE</span><br><span class="line">        SSE1 = sum((test_x0-result1).^2);</span><br><span class="line">        SSE2 = sum((test_x0-result2).^2);</span><br><span class="line">        SSE3 = sum((test_x0-result3).^2);</span><br><span class="line">        disp(strcat(&#x27;传统GM(1,1)对于试验组预测的误差平方和为&#x27;,num2str(SSE1)))</span><br><span class="line">        disp(strcat(&#x27;新信息GM(1,1)对于试验组预测的误差平方和为&#x27;,num2str(SSE2)))</span><br><span class="line">        disp(strcat(&#x27;新陈代谢GM(1,1)对于试验组预测的误差平方和为&#x27;,num2str(SSE3)))</span><br><span class="line">        if SSE1&lt;SSE2</span><br><span class="line">            if SSE1&lt;SSE3</span><br><span class="line">                choose = 1;  % SSE1最小，选择传统GM(1,1)模型</span><br><span class="line">            else</span><br><span class="line">                choose = 3;  % SSE3最小，选择新陈代谢GM(1,1)模型</span><br><span class="line">            end</span><br><span class="line">        elseif SSE2&lt;SSE3</span><br><span class="line">            choose = 2;  % SSE2最小，选择新信息GM(1,1)模型</span><br><span class="line">        else</span><br><span class="line">            choose = 3;  % SSE3最小，选择新陈代谢GM(1,1)模型</span><br><span class="line">        end</span><br><span class="line">        Model = &#123;&#x27;传统GM(1,1)模型&#x27;,&#x27;新信息GM(1,1)模型&#x27;,&#x27;新陈代谢GM(1,1)模型&#x27;&#125;;</span><br><span class="line">        disp(strcat(&#x27;因为&#x27;,Model(choose),&#x27;的误差平方和最小，所以我们应该选择其进行预测&#x27;))</span><br><span class="line">        disp(&#x27;------------------------------------------------------------&#x27;)</span><br><span class="line">        </span><br><span class="line">        %% 选用误差最小的那个模型进行预测</span><br><span class="line">        predict_num = input(&#x27;请输入你要往后面预测的期数： &#x27;);</span><br><span class="line">        % 计算使用传统GM模型的结果，用来得到另外的返回变量：x0_hat, 相对残差relative_residuals和级比偏差eta</span><br><span class="line">        [result, x0_hat, relative_residuals, eta] = gm11(x0, predict_num);  % 先利用gm11函数得到对原数据拟合的详细结果</span><br><span class="line">        </span><br><span class="line">        % % 判断我们选择的是哪个模型，如果是2或3，则更新刚刚由模型1计算出来的预测结果</span><br><span class="line">        if choose == 2</span><br><span class="line">            result = new_gm11(x0, predict_num);</span><br><span class="line">        end</span><br><span class="line">        if choose == 3</span><br><span class="line">            result = metabolism_gm11(x0, predict_num);</span><br><span class="line">        end</span><br><span class="line">        </span><br><span class="line">        %% 输出使用最佳的模型预测出来的结果</span><br><span class="line">        disp(&#x27;------------------------------------------------------------&#x27;)</span><br><span class="line">        disp(&#x27;对原始数据的拟合结果：&#x27;)</span><br><span class="line">        for i = 1:n</span><br><span class="line">            disp(strcat(num2str(year(i)), &#x27; ： &#x27;,num2str(x0_hat(i))))</span><br><span class="line">        end</span><br><span class="line">        disp(strcat(&#x27;往后预测&#x27;,num2str(predict_num),&#x27;期的得到的结果：&#x27;))</span><br><span class="line">        for i = 1:predict_num</span><br><span class="line">            disp(strcat(num2str(year(end)+i), &#x27; ： &#x27;,num2str(result(i))))</span><br><span class="line">        end</span><br><span class="line">        </span><br><span class="line">        %% 如果只有四期数据，那么我们就没必要选择何种模型进行预测，直接对三种模型预测的结果求一个平均值~</span><br><span class="line">    else</span><br><span class="line">        disp(&#x27;因为数据只有4期，因此我们直接将三种方法的结果求平均即可~&#x27;)</span><br><span class="line">        predict_num = input(&#x27;请输入你要往后面预测的期数： &#x27;);</span><br><span class="line">        disp(&#x27; &#x27;)</span><br><span class="line">        disp(&#x27;***下面是传统的GM(1,1)模型预测的详细过程***&#x27;)</span><br><span class="line">        [result1, x0_hat, relative_residuals, eta] = gm11(x0, predict_num);</span><br><span class="line">        disp(&#x27; &#x27;)</span><br><span class="line">        disp(&#x27;***下面是进行新信息的GM(1,1)模型预测的详细过程***&#x27;)</span><br><span class="line">        result2 = new_gm11(x0, predict_num);</span><br><span class="line">        disp(&#x27; &#x27;)</span><br><span class="line">        disp(&#x27;***下面是进行新陈代谢的GM(1,1)模型预测的详细过程***&#x27;)</span><br><span class="line">        result3 = metabolism_gm11(x0, predict_num);</span><br><span class="line">        result = (result1+result2+result3)/3;</span><br><span class="line">        </span><br><span class="line">        disp(&#x27;对原始数据的拟合结果：&#x27;)</span><br><span class="line">        for i = 1:n</span><br><span class="line">            disp(strcat(num2str(year(i)), &#x27; ： &#x27;,num2str(x0_hat(i))))</span><br><span class="line">        end</span><br><span class="line">        disp(strcat(&#x27;传统GM(1,1)往后预测&#x27;,num2str(predict_num),&#x27;期的得到的结果：&#x27;))</span><br><span class="line">        for i = 1:predict_num</span><br><span class="line">            disp(strcat(num2str(year(end)+i), &#x27; ： &#x27;,num2str(result1(i))))</span><br><span class="line">        end</span><br><span class="line">        disp(strcat(&#x27;新信息GM(1,1)往后预测&#x27;,num2str(predict_num),&#x27;期的得到的结果：&#x27;))</span><br><span class="line">        for i = 1:predict_num</span><br><span class="line">            disp(strcat(num2str(year(end)+i), &#x27; ： &#x27;,num2str(result2(i))))</span><br><span class="line">        end</span><br><span class="line">        disp(strcat(&#x27;新陈代谢GM(1,1)往后预测&#x27;,num2str(predict_num),&#x27;期的得到的结果：&#x27;))</span><br><span class="line">        for i = 1:predict_num</span><br><span class="line">            disp(strcat(num2str(year(end)+i), &#x27; ： &#x27;,num2str(result3(i))))</span><br><span class="line">        end</span><br><span class="line">        disp(strcat(&#x27;三种方法求平均得到的往后预测&#x27;,num2str(predict_num),&#x27;期的得到的结果：&#x27;))</span><br><span class="line">        for i = 1:predict_num</span><br><span class="line">            disp(strcat(num2str(year(end)+i), &#x27; ： &#x27;,num2str(result(i))))</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">    %% 绘制相对残差和级比偏差的图形(注意：因为是对原始数据的拟合效果评估，所以三个模型都是一样的哦~~~)</span><br><span class="line">    figure(4)</span><br><span class="line">    subplot(2,1,1)  % 绘制子图（将图分块）</span><br><span class="line">    plot(year(2:end), relative_residuals,&#x27;*-&#x27;); grid on;   % 原数据中的各时期和相对残差</span><br><span class="line">    legend(&#x27;相对残差&#x27;); xlabel(&#x27;年份&#x27;);</span><br><span class="line">    set(gca,&#x27;xtick&#x27;,year(2:1:end))  % 设置x轴横坐标的间隔为1</span><br><span class="line">    subplot(2,1,2)</span><br><span class="line">    plot(year(2:end), eta,&#x27;o-&#x27;); grid on;   % 原数据中的各时期和级比偏差</span><br><span class="line">    legend(&#x27;级比偏差&#x27;); xlabel(&#x27;年份&#x27;);</span><br><span class="line">    set(gca,&#x27;xtick&#x27;,year(2:1:end))  % 设置x轴横坐标的间隔为1</span><br><span class="line">    disp(&#x27; &#x27;)</span><br><span class="line">    disp(&#x27;****下面将输出对原数据拟合的评价结果***&#x27;)</span><br><span class="line">    </span><br><span class="line">    %% 残差检验</span><br><span class="line">    average_relative_residuals = mean(relative_residuals);  % 计算平均相对残差 mean函数用来均值</span><br><span class="line">    disp(strcat(&#x27;平均相对残差为&#x27;,num2str(average_relative_residuals)))</span><br><span class="line">    if average_relative_residuals&lt;0.1</span><br><span class="line">        disp(&#x27;残差检验的结果表明：该模型对原数据的拟合程度非常不错&#x27;)</span><br><span class="line">    elseif average_relative_residuals&lt;0.2</span><br><span class="line">        disp(&#x27;残差检验的结果表明：该模型对原数据的拟合程度达到一般要求&#x27;)</span><br><span class="line">    else</span><br><span class="line">        disp(&#x27;残差检验的结果表明：该模型对原数据的拟合程度不太好，建议使用其他模型预测&#x27;)</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">    %% 级比偏差检验</span><br><span class="line">    average_eta = mean(eta);   % 计算平均级比偏差</span><br><span class="line">    disp(strcat(&#x27;平均级比偏差为&#x27;,num2str(average_eta)))</span><br><span class="line">    if average_eta&lt;0.1</span><br><span class="line">        disp(&#x27;级比偏差检验的结果表明：该模型对原数据的拟合程度非常不错&#x27;)</span><br><span class="line">    elseif average_eta&lt;0.2</span><br><span class="line">        disp(&#x27;级比偏差检验的结果表明：该模型对原数据的拟合程度达到一般要求&#x27;)</span><br><span class="line">    else</span><br><span class="line">        disp(&#x27;级比偏差检验的结果表明：该模型对原数据的拟合程度不太好，建议使用其他模型预测&#x27;)</span><br><span class="line">    end</span><br><span class="line">    disp(&#x27; &#x27;)</span><br><span class="line">    disp(&#x27;------------------------------------------------------------&#x27;)</span><br><span class="line">    </span><br><span class="line">    %% 绘制最终的预测效果图</span><br><span class="line">    figure(5)  % 下面绘图中的符号m:洋红色 b:蓝色</span><br><span class="line">    plot(year,x0,&#x27;-o&#x27;,  year,x0_hat,&#x27;-*m&#x27;,  year(end)+1:year(end)+predict_num,result,&#x27;-*b&#x27; );   grid on;</span><br><span class="line">    hold on;</span><br><span class="line">    plot([year(end),year(end)+1],[x0(end),result(1)],&#x27;-*b&#x27;)</span><br><span class="line">    legend(&#x27;原始数据&#x27;,&#x27;拟合数据&#x27;,&#x27;预测数据&#x27;)  % 注意：如果lengend挡着了图形中的直线，那么lengend的位置可以自己手动拖动</span><br><span class="line">    set(gca,&#x27;xtick&#x27;,[year(1):1:year(end)+predict_num])  % 设置x轴横坐标的间隔为1</span><br><span class="line">    xlabel(&#x27;年份&#x27;);  ylabel(&#x27;y坐标数据&#x27;);  % 给坐标轴加上标签</span><br><span class="line">end</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="相关模型的代码实现"><a href="#相关模型的代码实现" class="headerlink" title="相关模型的代码实现"></a>相关模型的代码实现</h2><p>最后给出传统的GM(1,1)模型、新信息GM(1,1)模型还是新陈代谢GM(1,1)模型的代码。</p>
<ol>
<li>传统的GM(1,1)模型:</li>
</ol>
<ul>
<li>x0：要预测的原始数据</li>
<li>predict_num： 向后预测的期数</li>
<li>result：预测值</li>
<li>x0_hat：对原始数据的拟合值</li>
<li>relative_residuals： 对模型进行评价时计算得到的相对残差</li>
<li>eta： 对模型进行评价时计算得到的级比偏差</li>
</ul>
<p>注意，实际调用时该函数时不一定输出全部结果，就像corrcoef函数一样~，可以只输出相关系数矩阵，也可以附带输出p值矩阵</p>
<p>代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">function [result, x0_hat, relative_residuals, eta] = gm11(x0, predict_num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    n = length(x0); % 数据的长度</span><br><span class="line">    x1=cumsum(x0); % 计算一次累加值</span><br><span class="line">    z1 = (x1(1:end-1) + x1(2:end)) / 2;  % 计算紧邻均值生成数列（长度为n-1）</span><br><span class="line">    % 将从第二项开始的x0当成y，z1当成x，来进行一元回归  y = kx +b</span><br><span class="line">    y = x0(2:end); x = z1;</span><br><span class="line">    k = ((n-1)*sum(x.*y)-sum(x)*sum(y))/((n-1)*sum(x.*x)-sum(x)*sum(x));</span><br><span class="line">    b = (sum(x.*x)*sum(y)-sum(x)*sum(x.*y))/((n-1)*sum(x.*x)-sum(x)*sum(x));</span><br><span class="line">    a = -k;  %注意：k = -a哦</span><br><span class="line">    % 注意： -a就是发展系数,  b就是灰作用量</span><br><span class="line">    </span><br><span class="line">    disp(&#x27;现在进行GM(1,1)预测的原始数据是: &#x27;)</span><br><span class="line">    disp(mat2str(x0&#x27;))  % mat2str可以将矩阵或者向量转换为字符串显示</span><br><span class="line">    disp(strcat(&#x27;最小二乘法拟合得到的发展系数为&#x27;,num2str(-a),&#x27;，灰作用量是&#x27;,num2str(b)))</span><br><span class="line">    disp(&#x27;***************分割线***************&#x27;)</span><br><span class="line">    x0_hat=zeros(n,1);  x0_hat(1)=x0(1);   % x0_hat向量用来存储对x0序列的拟合值，这里先进行初始化</span><br><span class="line">    for m = 1: n-1</span><br><span class="line">        x0_hat(m+1) = (1-exp(a))*(x0(1)-b/a)*exp(-a*m);</span><br><span class="line">    end</span><br><span class="line">    result = zeros(predict_num,1);  % 初始化用来保存预测值的向量</span><br><span class="line">    for i = 1: predict_num</span><br><span class="line">        result(i) = (1-exp(a))*(x0(1)-b/a)*exp(-a*(n+i-1)); % 带入公式直接计算</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    % 计算绝对残差和相对残差</span><br><span class="line">    absolute_residuals = x0(2:end) - x0_hat(2:end);   % 从第二项开始计算绝对残差，因为第一项是相同的</span><br><span class="line">    relative_residuals = abs(absolute_residuals) ./ x0(2:end);  % 计算相对残差，注意分子要加绝对值，而且要使用点除</span><br><span class="line">    % 计算级比和级比偏差</span><br><span class="line">    class_ratio = x0(2:end) ./ x0(1:end-1) ;  % 计算级比 sigma(k) = x0(k)/x0(k-1)</span><br><span class="line">    eta = abs(1-(1-0.5*a)/(1+0.5*a)*(1./class_ratio));  % 计算级比偏差</span><br><span class="line">end</span><br></pre></td></tr></table></figure>


<ol start="2">
<li>新信息GM(1,1)模型，代码如下：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function [result] = new_gm11(x0, predict_num)</span><br><span class="line">    result = zeros(predict_num,1);  % 初始化用来保存预测值的向量</span><br><span class="line">    for i = 1 : predict_num  </span><br><span class="line">        result(i) = gm11(x0, 1);  % 将预测一期的结果保存到result中</span><br><span class="line">        x0 = [x0; result(i)];  % 更新x0向量，此时x0多了新的预测信息</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>新陈代谢GM(1,1)模型</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function [result] = metabolism_gm11(x0, predict_num)</span><br><span class="line"></span><br><span class="line">    result = zeros(predict_num,1);  % 初始化用来保存预测值的向量</span><br><span class="line">    for i = 1 : predict_num  </span><br><span class="line">        result(i) = gm11(x0, 1);  % 将预测一期的结果保存到result中</span><br><span class="line">        x0 = [x0(2:end); result(i)];  % 更新x0向量，此时x0多了新的预测信息，并且删除了最开始的那个向量</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p>以上。</p>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/">数据科学</a></div><div class="post_share"><div class="social-share" data-image="/img/md4.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdnjs.sourcegcdn.com/ajax/libs/social-share.js/1.0.16/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdnjs.sourcegcdn.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js" defer></script></div></div><div class="end is-center">end</div><div id="post-comment"><div class="comment-head is-center"><div class="comment-headline"><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/head_sculpture.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">L1ttleQing</div><div class="author-info__description">越悲怆的时候我越想嬉皮</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/L1ttleQing"><i class="fab fa-github"></i><span>主页</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/L1ttleQing" target="_blank" title="fab fa-github"></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=820314438&amp;website=www.oicqzone.com" target="_blank" title="fab fa-qq"></a><a class="social-icon" href="mailto:820314438@qq.com" target="_blank" title="fas fa-envelope-open-text"></a><a class="social-icon" href="https://space.bilibili.com/26528101" target="_blank" title="fab fa-bilibili"></a><a class="social-icon" href="weixin://dl/w19183660929" target="_blank" title="fab fa-weixin"></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">重构了界面，去除冗余结构，哦耶！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95"><span class="toc-number">1.</span> <span class="toc-text">回归分析方法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E5%88%86%E6%9E%90"><span class="toc-number">2.</span> <span class="toc-text">时间序列分析</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%81%B0%E8%89%B2%E9%A2%84%E6%B5%8B%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.</span> <span class="toc-text">灰色预测模型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E5%87%BD%E6%95%B0"><span class="toc-number">3.1.</span> <span class="toc-text">主函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%A8%A1%E5%9E%8B%E7%9A%84%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.2.</span> <span class="toc-text">相关模型的代码实现</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/10/31/%E8%B9%89%E8%B7%8E%E5%8E%BB/" title="蹉跎去"><img src="/img/ctqq.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="蹉跎去"/></a><div class="content"><a class="title" href="/2025/10/31/%E8%B9%89%E8%B7%8E%E5%8E%BB/" title="蹉跎去">蹉跎去</a><time datetime="2025-10-31T03:09:00.000Z" title="发表于 2025-10-31 11:09:00">2025-10-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/02/22/%E5%AE%B9%E6%98%93%E8%8E%AB%E7%9B%B8%E5%82%AC/" title="容易莫相催"><img src="/img/ctq.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="容易莫相催"/></a><div class="content"><a class="title" href="/2025/02/22/%E5%AE%B9%E6%98%93%E8%8E%AB%E7%9B%B8%E5%82%AC/" title="容易莫相催">容易莫相催</a><time datetime="2025-02-22T03:09:00.000Z" title="发表于 2025-02-22 11:09:00">2025-02-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/02/08/1Springboot/" title="笔记 SpringBoot"><img src="/img/springboot.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="笔记 SpringBoot"/></a><div class="content"><a class="title" href="/2025/02/08/1Springboot/" title="笔记 SpringBoot">笔记 SpringBoot</a><time datetime="2025-02-08T08:09:00.000Z" title="发表于 2025-02-08 16:09:00">2025-02-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/28/1mybatis/" title="笔记 Mybatis/plus"><img src="/img/mb.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="笔记 Mybatis/plus"/></a><div class="content"><a class="title" href="/2025/01/28/1mybatis/" title="笔记 Mybatis/plus">笔记 Mybatis/plus</a><time datetime="2025-01-28T08:09:00.000Z" title="发表于 2025-01-28 16:09:00">2025-01-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/22/%E8%8B%8D%E8%8C%AB%E6%9D%A5%E6%97%B6/" title="苍茫来时"><img src="/img/cmls.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="苍茫来时"/></a><div class="content"><a class="title" href="/2025/01/22/%E8%8B%8D%E8%8C%AB%E6%9D%A5%E6%97%B6/" title="苍茫来时">苍茫来时</a><time datetime="2025-01-21T19:09:10.000Z" title="发表于 2025-01-22 03:09:10">2025-01-22</time></div></div></div></div></div></div></main><div id="content_rightside"><div id="rightside-toc"><div class="toc-box"></div></div></div></div><footer id="footer"><div class="wordcount"><span>L1ttleQing已经写了207.5k字。</span></br><span>相当于写完了一本巴金的《寒夜》</span></div><div class="footer-content"><div style="font-size: 0.7rem"><span id="timeDate">载入天数...</span><span> </span><span id="times">载入时分秒...</span><script src="/js/add/duration.js"></script></div></div></footer></div><div id="rightside"></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: 'fymxlpNGPzfrWOWcfY71mwBV-gzGzoHsz',
      appKey: 'I0VLNN103CyrzIXBIh7eFsH5',
      placeholder: '昵称为必填项...',
      avatar: 'mp',
      meta: 'nick,mail'.split(','),
      pageSize: '10',
      lang: 'en',
      recordIP: true,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign(initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn1.tianli0.top/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script async src="//at.alicdn.com/t/font_2749059_1lswi5j6yqg.js"></script><script src="/js/add/nav.js"></script><script src="/js/add/leftsidemenu.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn1.tianli0.top/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn1.tianli0.top/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>